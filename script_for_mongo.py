from pymongo import MongoClient
from bson.objectid import ObjectId
from datetime import datetime

# Подключение к MongoDB
client = MongoClient('mongodb://localhost:27017/')
db = client['website_with_recepies']
collection = db['recepies']

# Данные рецептов для вставки
recipes = [
    {
        "_id": ObjectId("507f1f77bcf86cd799439011"),
        "user_id": 1,
        "name": "Паста Карбонара",
        "description": "Классическая итальянская паста с хрустящим беконом и сливочным соусом",
        "cooking_time": 25,
        "difficulty": "Средне",
        "servings": 2,
        "ingredients": [
            "200 г спагетти",
            "100 г гуанчиале или панчетты",
            "2 яичных желтка",
            "50 г пармезана",
            "Свежемолотый черный перец",
            "Соль"
        ],
        "instructions": [
            "Приготовьте пасту в подсоленной воде согласно инструкции на упаковке",
            "Обжарьте гуанчиале до хрустящего состояния",
            "Взбейте желтки с пармезаном и черным перцем",
            "Смешайте горячую пасту с соусом, добавив 2 ст.л. воды от пасты",
            "Добавьте обжаренное мясо и сразу подавайте"
        ],
        "category": "Основные блюда",
        "images": [
            "https://example.com/images/carbonara.jpg"
        ],
        "featured": True,
        "created_at": datetime(2023, 5, 15, 10, 0, 0)
    },
    {
        "_id": ObjectId("507f1f77bcf86cd799439012"),
        "user_id": 1,
        "name": "Овсяноблин с бананом",
        "description": "Полезный и быстрый завтрак с овсяными хлопьями и фруктами",
        "cooking_time": 15,
        "difficulty": "Легко",
        "servings": 1,
        "ingredients": [
            "4 ст.л. овсяных хлопьев",
            "1 яйцо",
            "50 мл молока",
            "1 банан",
            "1 ч.л. меда",
            "Щепотка корицы"
        ],
        "instructions": [
            "Смешайте овсянку, яйцо и молоко, дайте постоять 5 минут",
            "Вылейте смесь на разогретую сковороду с антипригарным покрытием",
            "Жарьте 3-4 минуты с каждой стороны до золотистой корочки",
            "Выложите на блин нарезанный банан, полейте медом и посыпьте корицей"
        ],
        "category": "Завтраки",
        "images": [
            "https://example.com/images/oatmeal.jpg"
        ],
        "featured": True,
        "created_at": datetime(2023, 6, 20, 8, 30, 0)
    },
    {
        "_id": ObjectId("507f1f77bcf86cd799439013"),
        "user_id": 1,
        "name": "Тирамису",
        "description": "Нежный итальянский десерт с кофейной пропиткой",
        "cooking_time": 40,
        "difficulty": "Сложно",
        "servings": 6,
        "ingredients": [
            "250 г маскарпоне",
            "3 яйца",
            "100 г сахара",
            "200 мл крепкого кофе",
            "150 г савоярди",
            "2 ст.л. какао-порошка",
            "1 ст.л. ликера Амаретто"
        ],
        "instructions": [
            "Отделите желтки от белков",
            "Взбейте желтки с сахаром до светлой пены",
            "Добавьте маскарпоне и аккуратно перемешайте",
            "Взбейте белки до устойчивых пиков и вмешайте в крем",
            "Смешайте охлажденный кофе с ликером",
            "Выкладывайте слоями: печенье, смоченное в кофе, затем крем",
            "Посыпьте какао и охлаждайте 4 часа перед подачей"
        ],
        "category": "Десерты",
        "images": [
            "https://example.com/images/tiramisu.jpg"
        ],
        "featured": True,
        "created_at": datetime(2023, 4, 10, 14, 20, 0)
    },
    {
        "_id": ObjectId("507f1f77bcf86cd799439014"),
        "user_id": 2,
        "name": "Мохито безалкогольный",
        "description": "Освежающий летний напиток с лаймом и мятой",
        "cooking_time": 5,
        "difficulty": "Легко",
        "servings": 1,
        "ingredients": [
            "1 лайм",
            "10 листиков свежей мяты",
            "2 ч.л. сахара",
            "150 мл газированной воды",
            "Лед"
        ],
        "instructions": [
            "Разрежьте лайм на четвертинки",
            "В высокий стакан положите мяту и сахар",
            "Аккуратно подавите мяту мадлером",
            "Добавьте лайм и снова подавите",
            "Наполните стакан льдом",
            "Долейте газированную воду и аккуратно перемешайте"
        ],
        "category": "Напитки",
        "images": [
            "https://example.com/images/mojito.jpg"
        ],
        "featured": False,
        "created_at": datetime(2023, 7, 5, 16, 45, 0)
    },
    {
        "_id": ObjectId("507f1f77bcf86cd799439015"),
        "user_id": 2,
        "name": "Овощная запеканка с сыром",
        "description": "Ароматная запеканка из сезонных овощей под сырной корочкой",
        "cooking_time": 35,
        "difficulty": "Средне",
        "servings": 4,
        "ingredients": [
            "1 кабачок",
            "1 баклажан",
            "2 помидора",
            "1 болгарский перец",
            "100 г твердого сыра",
            "2 зубчика чеснока",
            "2 ст.л. оливкового масла",
            "Соль и перец по вкусу",
            "Сушеные травы"
        ],
        "instructions": [
            "Нарежьте все овощи кружочками толщиной 5 мм",
            "Выложите овощи слоями в форму для запекания",
            "Смешайте оливковое масло с измельченным чесноком, солью, перцем и травами",
            "Полейте овощи масляной смесью",
            "Накройте фольгой и запекайте 20 минут при 180°C",
            "Снимите фольгу, посыпьте тертым сыром",
            "Запекайте еще 10 минут до золотистой корочки"
        ],
        "category": "Основные блюда",
        "images": [
            "https://example.com/images/casserole.jpg"
        ],
        "featured": True,
        "created_at": datetime(2023, 5, 28, 12, 15, 0)
    }
]

# Вставка данных в коллекцию
try:
    result = collection.insert_many(recipes)
    print(f"Успешно добавлено {len(result.inserted_ids)} рецептов!")
    print("ID добавленных документов:", result.inserted_ids)
except Exception as e:
    print("Ошибка при добавлении рецептов:", e)
finally:
    # Закрытие соединения
    client.close()


